<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <title>Wheelie El-sparkesykkel Spill</title>
    <style>
        body {
            background: #aee2ff;
            margin: 0;
            overflow: hidden;
        }
        canvas {
            background: #eef;
            display: block;
            margin: 0 auto;
            border: 2px solid #222;
        }
        #info {
            text-align: center;
            font-family: Arial, sans-serif;
            margin: 10px 0;
        }
        #speedometer {
            position: absolute;
            top: 16px;
            right: 36px;
            z-index: 20;
            background: rgba(247,247,247,0.75);
            color: #1a374d;
            font-size: 32px;
            font-family: 'Segoe UI', Arial, sans-serif;
            padding: 6px 24px;
            border-radius: 9px;
            font-weight: bold;
            box-shadow: 1px 1px 5px #ccc;
            letter-spacing: 2px;
        }
    </style>
</head>
<body>
    <div id="info">
        <strong>Taster:</strong> D = Wheelie | F = 칄n fot | Pil H칮yre/Venstre = Kj칮r sparkesykkel
    </div>
    <div id="speedometer">80 km/t</div>
    <canvas id="gameCanvas" width="900" height="400"></canvas>
    <script>
    window.onload = function() {
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const speedometer = document.getElementById('speedometer');
        
        // Fiks hastighet (80 km/t)
        const VISIBLE_SPEED = 80; // km/t
        const GAME_PX_PER_FRAME = 12; // Hvor langt scooteren flytter seg for 친 se rask ut

        let scooter = {
            x: 120,
            y: 300,
            width: 90,
            height: 24,
            vx: 0,
            wheelie: false,
            oneFoot: false
        };

        function drawRoad() {
            ctx.fillStyle = '#bbb';
            ctx.fillRect(0, 340, canvas.width, 60);
            ctx.strokeStyle = '#777';
            ctx.lineWidth = 2;
            for (let i = 0; i < canvas.width; i += 40) {
                ctx.beginPath();
                ctx.moveTo(i, 370);
                ctx.lineTo(i + 20, 370);
                ctx.stroke();
            }
        }

        function drawScooter() {
            ctx.save();
            ctx.translate(scooter.x + scooter.width/2, scooter.y);
            if (scooter.wheelie) {
                ctx.rotate(-Math.PI/8);
            }
            ctx.translate(-scooter.width/2, 0);

            // Hjulene
            ctx.fillStyle = "#222";
            ctx.beginPath();
            ctx.arc(12, 14, 13, 0, 2 * Math.PI);
            ctx.fill();
            if (!scooter.wheelie) {
                ctx.beginPath();
                ctx.arc(scooter.width-12, 14, 13, 0, 2 * Math.PI);
                ctx.fill();
            }

            // Brettet
            ctx.fillStyle = "#000";
            ctx.fillRect(0, 0, scooter.width, scooter.height);

            // Styret
            ctx.strokeStyle = "#284b63";
            ctx.lineWidth = 6;
            ctx.beginPath();
            ctx.moveTo(scooter.width-6, 0);
            ctx.lineTo(scooter.width-6, -32);
            ctx.stroke();

            // 칄n fot modus
            if (scooter.oneFoot) {
                ctx.fillStyle = "#fcb900";
                ctx.fillRect(scooter.width / 2 - 7, scooter.height+7, 14, 22);
                ctx.font = '16px Arial';
                ctx.fillText('游', scooter.width/2-7, scooter.height+26);
            }

            ctx.restore();
        }

        function update() {
            // Begrens innenfor canvas
            if (scooter.x + scooter.vx >= 0 && scooter.x + scooter.vx <= canvas.width-scooter.width) {
                scooter.x += scooter.vx;
            }
        }

        function render() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawRoad();
            drawScooter();

            // Tegn "80 km/t" p친 canvas ogs친 (hvis du ikke vil bruke speedometer-diven, kommenter vekk neste 7 linjer)
            /*
            ctx.font = "bold 32px Arial";
            ctx.fillStyle = "#1a374d";
            ctx.textAlign = "right";
            ctx.globalAlpha = 0.77;
            ctx.fillText(VISIBLE_SPEED + " km/t", canvas.width-26, 43);
            ctx.globalAlpha = 1;
            ctx.textAlign = "left";
            */
        }

        function gameLoop() {
            update();
            render();
            requestAnimationFrame(gameLoop);
        }

        document.addEventListener('keydown', function(e) {
            if (e.code === "ArrowRight" || e.key === "ArrowRight") {
                scooter.vx = GAME_PX_PER_FRAME;
            }
            if (e.code === "ArrowLeft" || e.key === "ArrowLeft") {
                scooter.vx = -GAME_PX_PER_FRAME;
            }
            if (e.code === "KeyD" || e.key === "d") {
                scooter.wheelie = true;
            }
            if (e.code === "KeyF" || e.key === "f") {
                scooter.oneFoot = true;
            }
        });

        document.addEventListener('keyup', function(e) {
            if (e.code === "ArrowRight" || e.code === "ArrowLeft" || e.key === "ArrowRight" || e.key === "ArrowLeft") {
                scooter.vx = 0;
            }
            if (e.code === "KeyD" || e.key === "d") {
                scooter.wheelie = false;
            }
            if (e.code === "KeyF" || e.key === "f") {
                scooter.oneFoot = false;
            }
        });

        // Oppdater speedometer-display (kun n칮dvendig dersom hastigheten endres dynamisk, ikke for fast tall, men vi lar det st친)
        speedometer.textContent = VISIBLE_SPEED + " km/t";
        gameLoop();
    };
    </script>
</body>
</html>
