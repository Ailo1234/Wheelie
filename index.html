<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<title>Scooter Wheelie - Balanse</title>
<style>
    body {
        margin: 0;
        background: #222;
        color: #fff;
        font-family: 'Segoe UI', sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        overflow: hidden;
    }
    canvas {
        background: linear-gradient(#87ceeb, #4caf50);
        border: 4px solid #444;
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        margin-top: 20px;
    }
    .stats {
        text-align: center;
        background: #333;
        padding: 15px;
        border-radius: 10px;
        margin-top: 10px;
        min-width: 300px;
        position: relative;
    }
    #restartBtn {
        display: none;
        margin-top: 10px;
        padding: 10px 20px;
        font-size: 16px;
        background: #4caf50;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }
    #restartBtn:hover {
        background: #45a049;
    }
    .game-over-text {
        color: #ff5555;
        font-weight: bold;
        display: none;
    }
</style>
</head>
<body>
 
<div class="stats">
    <h1>Scooter Wheelie</h1>
    <p>Bruk <b>Venstre</b> og <b>Høyre</b> piltast for å holde balansen!</p>
    <h2>Meter: <span id="score">0</span>m</h2>
    <div id="statusText" class="game-over-text">CRASH!</div>
    <button id="restartBtn">Prøv Igjen</button>
</div>
 
<canvas id="game" width="800" height="400"></canvas>
 
<script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");
    const scoreEl = document.getElementById("score");
    const statusText = document.getElementById("statusText");
    const restartBtn = document.getElementById("restartBtn");
 
    let score = 0;
    let isGameOver = false;
    let keys = {};
 
    // Vi lager en funksjon for å sette start-verdiene
    const scooter = {
        x: 150,
        y: 330,
        width: 80,
        height: 60,
        tilt: 0,
        tiltVelocity: 0,
        gravity: 0.0015,      // Redusert fra 0.002
        balancePower: 0.0025, // Redusert fra 0.005 for mer kontroll
        friction: 0.92        // Gjør bevegelsen litt "seigere"
    };
 
    window.addEventListener("keydown", e => keys[e.key] = true);
    window.addEventListener("keyup", e => keys[e.key] = false);
    
    restartBtn.addEventListener("click", resetGame);
 
    function resetGame() {
        score = 0;
        isGameOver = false;
        scooter.tilt = 0;
        scooter.tiltVelocity = 0;
        scoreEl.textContent = "0";
        statusText.style.display = "none";
        restartBtn.style.display = "none";
    }
 
    function update() {
        if (isGameOver) return;
 
        // Inputs
        if (keys["ArrowRight"]) {
            scooter.tiltVelocity += scooter.balancePower;
        }
        if (keys["ArrowLeft"]) {
            scooter.tiltVelocity -= scooter.balancePower;
        }
 
        // Fysikk
        if (scooter.tilt > 0) {
            // "Instabilitet" - jo mer tilt, jo mer vil den tippe (men redusert kraft her)
            scooter.tiltVelocity += (scooter.tilt * 0.002); 
            scooter.tiltVelocity -= scooter.gravity;
        }
 
        scooter.tilt += scooter.tiltVelocity;
        scooter.tiltVelocity *= scooter.friction;
 
        // Hindre at forhjulet går under bakken
        if (scooter.tilt < 0) {
            scooter.tilt = 0;
            scooter.tiltVelocity = 0;
        }
 
        // Sjekk krasj (tippet over 85 grader)
        if (scooter.tilt > 1.5) {
            isGameOver = true;
            statusText.style.display = "block";
            restartBtn.style.display = "inline-block";
        }
 
        // Poenggiving
        if (scooter.tilt > 0.05 && !isGameOver) {
            score += 0.1;
            scoreEl.textContent = Math.floor(score);
        }
    }
 
    function drawScooter() {
        ctx.save();
        ctx.translate(scooter.x, scooter.y);
        ctx.rotate(-scooter.tilt);
 
        // Brett
        ctx.fillStyle = "#333";
        ctx.fillRect(0, -10, 60, 8);
 
        // Styre
        ctx.strokeStyle = "#555";
        ctx.lineWidth = 4;
        ctx.beginPath();
        ctx.moveTo(60, -10);
        ctx.lineTo(60, -50);
        ctx.lineTo(50, -50);
        ctx.stroke();
 
        // Hjul
        ctx.fillStyle = "#111";
        ctx.beginPath();
        ctx.arc(0, 0, 10, 0, Math.PI * 2); // Bakhjul
        ctx.fill();
        ctx.beginPath();
        ctx.arc(60, 0, 10, 0, Math.PI * 2); // Forhjul
        ctx.fill();
 
        ctx.restore();
    }
 
    function drawRoad() {
        ctx.fillStyle = "#444";
        ctx.fillRect(0, 340, canvas.width, 60);
        
        ctx.strokeStyle = "#fff";
        ctx.setLineDash([30, 30]);
        // Veien beveger seg bare hvis du faktisk gjør en wheelie
        let roadSpeed = (scooter.tilt > 0) ? (score * 10) : 0;
        ctx.lineDashOffset = roadSpeed % 60; 
        
        ctx.beginPath();
        ctx.moveTo(0, 370);
        ctx.lineTo(canvas.width, 370);
        ctx.stroke();
    }
 
    function gameLoop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        update();
        drawRoad();
        drawScooter();
        requestAnimationFrame(gameLoop);
    }
 
    gameLoop();
</script>
</body>
</html>
